{% extends 'base_generic.html' %}

{% block content %}
    {% comment %} Task body {% endcomment %}
    {% if taskmodel %}
        <h1><strong>Title:</strong> {{ taskmodel.title }}</h1>
        <h2><strong>Description:</strong> </h2><p>{{ taskmodel.description }}</p>
        <ul>
            <li><strong>Creation date:</strong> {{ taskmodel.creation_date }} </li>
            <li><strong>Status:</strong> {{ taskmodel.status }}</li>
            <li><strong>Owner:</strong> {{ taskmodel.owner.username }}</li>
        
        {% comment %} If assigned to somebody {% endcomment %}
        {% if taskmodel.assignee %}
            <li><strong>Assignee:</strong></li>
            <ul>
                {% for user in taskmodel.assignee.all %}
                    <li>{{ user }}</li>
                {% endfor %}
            </ul>
            <p><a href="{% url 'update-task-status' pk=taskmodel.pk %}">Update task's status</a></p>
        {% endif %}
        </ul>

        {% comment %} If current user owner, then let him edit task  {% endcomment %}
        {% if user == taskmodel.owner %}
            <p><a href="{% url 'update-task' pk=taskmodel.pk %}">Edit task</a></p>
        {% endif %}

    {% else %}
        <h2>There is no such task in your list</h2>
    {% endif %}
{% endblock content %}